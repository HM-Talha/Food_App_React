let a = ["CUIC10001.jpg", "CUIC10044.jpg", "CUIC10073.jpg", "CUIC10103.jpg", "CUIC10159.jpg", "CUIC10212.jpg", "CUIC10254.jpg", "CUIC10303.jpg", "CUIC10385.jpg", "CUIC10419.jpg", "CUIC10457.jpg", "CUIC10502.jpg", "CUIP10027.jpg", "CUIP10074.jpg", "CUIC10002.jpg", "CUIC10045.jpg", "CUIC10074.jpg", "CUIC10104.jpg", "CUIC10160.jpg", "CUIC10213.jpg", "CUIC10255.jpg", "CUIC10306.jpg", "CUIC10387.jpg", "CUIC10420.jpg", "CUIC10464.jpg", "CUIC10503.jpg", "CUIP10030.jpg", "CUIP10076.jpg", "CUIC10003.jpg", "CUIC10046.jpg", "CUIC10075.jpg", "CUIC10105.jpg", "CUIC10161.jpg", "CUIC10214.jpg", "CUIC10256.jpg", "CUIC10308.jpg", "CUIC10390.jpg", "CUIC10421.jpg", "CUIC10466.jpg", "CUIC10504.jpg", "CUIP10032.jpg", "CUIP10077.jpg", "CUIC10008.jpg", "CUIC10047.jpg", "CUIC10077.jpg", "CUIC10106.jpg", "CUIC10162.jpg", "CUIC10215.jpg", "CUIC10257.jpg", "CUIC10310.jpg", "CUIC10391.jpg", "CUIC10423.jpg", "CUIC10467.jpg", "CUIC10505.jpg", "CUIP10033.jpg", "CUIP10078.jpg", "CUIC10009.jpg", "CUIC10048.jpg", "CUIC10078.jpg", "CUIC10108.jpg", "CUIC10163.jpg", "CUIC10216.jpg", "CUIC10258.jpg", "CUIC10312.jpg", "CUIC10392.jpg", "CUIC10424.jpg", "CUIC10468.jpg", "CUIC10506.jpg", "CUIP10035.jpg", "CUIP10079.jpg", "CUIC10010.jpg", "CUIC10049.jpg", "CUIC10079.jpg", "CUIC10117.jpg", "CUIC10164.jpg", "CUIC10217.jpg", "CUIC10259.jpg", "CUIC10313.jpg", "CUIC10393.jpg", "CUIC10425.jpg", "CUIC10470.jpg", "CUIC10507.jpg", "CUIP10041.jpg", "CUIP10081.jpg", "CUIC10011.jpg", "CUIC10050.jpg", "CUIC10080.jpg", "CUIC10123.jpg", "CUIC10165.jpg", "CUIC10218.jpg", "CUIC10260.jpg", "CUIC10316.jpg", "CUIC10394.jpg", "CUIC10426.jpg", "CUIC10471.jpg", "CUIC10508.jpg", "CUIP10042.jpg", "CUIP10082.jpg", "CUIC10012.jpg", "CUIC10051.jpg", "CUIC10081.jpg", "CUIC10135.jpg", "CUIC10166.jpg", "CUIC10219.jpg", "CUIC10261.jpg", "CUIC10317.jpg", "CUIC10395.jpg", "CUIC10427.jpg", "CUIC10472.jpg", "CUIC10509.jpg", "CUIP10043.jpg", "CUIP10083.jpg", "CUIC10024.jpg", "CUIC10052.jpg", "CUIC10082.jpg", "CUIC10136.jpg", "CUIC10167.jpg", "CUIC10220.jpg", "CUIC10262.jpg", "CUIC10318.jpg", "CUIC10396.jpg", "CUIC10428.jpg", "CUIC10473.jpg", "CUIC10510.jpg", "CUIP10044.jpg", "CUIP10085.jpg", "CUIC10025.jpg", "CUIC10053.jpg", "CUIC10083.jpg", "CUIC10137.jpg", "CUIC10168.jpg", "CUIC10221.jpg", "CUIC10264.jpg", "CUIC10320.jpg", "CUIC10397.jpg", "CUIC10429.jpg", "CUIC10475.jpg", "CUIC10511.jpg", "CUIP10047.jpg", "CUIP10087.jpg", "CUIC10026.jpg", "CUIC10054.jpg", "CUIC10084.jpg", "CUIC10138.jpg", "CUIC10169.jpg", "CUIC10222.jpg", "CUIC10266.jpg", "CUIC10327.jpg", "CUIC10398.jpg", "CUIC10430.jpg", "CUIC10477.jpg", "CUIC10518.jpg", "CUIP10048.jpg", "CUIP10088.jpg", "CUIC10027.jpg", "CUIC10055.jpg", "CUIC10085.jpg", "CUIC10139.jpg", "CUIC10170.jpg", "CUIC10223.jpg", "CUIC10267.jpg", "CUIC10328.jpg", "CUIC10401.jpg", "CUIC10431.jpg", "CUIC10481.jpg", "CUIC10519.jpg", "CUIP10051.jpg", "CUIP10089.jpg", "CUIC10028.jpg", "CUIC10056.jpg", "CUIC10086.jpg", "CUIC10140.jpg", "CUIC10171.jpg", "CUIC10224.jpg", "CUIC10268.jpg", "CUIC10329.jpg", "CUIC10403.jpg", "CUIC10432.jpg", "CUIC10482.jpg", "CUIC10520.jpg", "CUIP10053.jpg", "CUIP10090.jpg", "CUIC10029.jpg", "CUIC10057.jpg", "CUIC10087.jpg", "CUIC10143.jpg", "CUIC10172.jpg", "CUIC10225.jpg", "CUIC10269.jpg", "CUIC10330.jpg", "CUIC10404.jpg", "CUIC10433.jpg", "CUIC10483.jpg", "CUIC10521.jpg", "CUIP10055.jpg", "CUIP10092.jpg", "CUIC10030.jpg", "CUIC10058.jpg", "CUIC10088.jpg", "CUIC10144.jpg", "CUIC10173.jpg", "CUIC10226.jpg", "CUIC10270.jpg", "CUIC10332.jpg", "CUIC10405.jpg", "CUIC10434.jpg", "CUIC10484.jpg", "CUIP10002.jpg", "CUIP10056.jpg", "CUIP10094.jpg", "CUIC10031.jpg", "CUIC10059.jpg", "CUIC10089.jpg", "CUIC10145.jpg", "CUIC10182.jpg", "CUIC10227.jpg", "CUIC10271.jpg", "CUIC10333.jpg", "CUIC10406.jpg", "CUIC10435.jpg", "CUIC10485.jpg", "CUIP10005.jpg", "CUIP10057.jpg", "CUIP10095.jpg", "CUIC10032.jpg", "CUIC10060.jpg", "CUIC10090.jpg", "CUIC10146.jpg", "CUIC10184.jpg", "CUIC10228.jpg", "CUIC10272.jpg", "CUIC10334.jpg", "CUIC10407.jpg", "CUIC10436.jpg", "CUIC10486.jpg", "CUIP10008.jpg", "CUIP10058.jpg", "CUIP10096.jpg", "CUIC10033.jpg", "CUIC10061.jpg", "CUIC10092.jpg", "CUIC10147.jpg", "CUIC10201.jpg", "CUIC10229.jpg", "CUIC10273.jpg", "CUIC10358.jpg", "CUIC10408.jpg", "CUIC10437.jpg", "CUIC10487.jpg", "CUIP10009.jpg", "CUIP10059.jpg", "CUIP10099.jpg", "CUIC10034.jpg", "CUIC10062.jpg", "CUIC10093.jpg", "CUIC10148.jpg", "CUIC10202.jpg", "CUIC10230.jpg", "CUIC10276.jpg", "CUIC10359.jpg", "CUIC10409.jpg", "CUIC10438.jpg", "CUIC10488.jpg", "CUIP10010.jpg", "CUIP10060.jpg", "CUIP10100.jpg", "CUIC10035.jpg", "CUIC10063.jpg", "CUIC10094.jpg", "CUIC10149.jpg", "CUIC10203.jpg", "CUIC10231.jpg", "CUIC10279.jpg", "CUIC10369.jpg", "CUIC10410.jpg", "CUIC10439.jpg", "CUIC10489.jpg", "CUIP10011.jpg", "CUIP10061.jpg", "CUIP10101.jpg", "CUIC10036.jpg", "CUIC10064.jpg", "CUIC10095.jpg", "CUIC10150.jpg", "CUIC10204.jpg", "CUIC10232.jpg", "CUIC10286.jpg", "CUIC10370.jpg", "CUIC10411.jpg", "CUIC10440.jpg", "CUIC10492.jpg", "CUIP10012.jpg", "CUIP10062.jpg", "CUIP10103.jpg", "CUIC10037.jpg", "CUIC10065.jpg", "CUIC10096.jpg", "CUIC10151.jpg", "CUIC10205.jpg", "CUIC10236.jpg", "CUIC10288.jpg", "CUIC10371.jpg", "CUIC10412.jpg", "CUIC10441.jpg", "CUIC10494.jpg", "CUIP10014.jpg", "CUIP10063.jpg", "CUIP10108.jpg", "CUIC10038.jpg", "CUIC10066.jpg", "CUIC10097.jpg", "CUIC10152.jpg", "CUIC10206.jpg", "CUIC10238.jpg", "CUIC10290.jpg", "CUIC10372.jpg", "CUIC10413.jpg", "CUIC10442.jpg", "CUIC10496.jpg", "CUIP10015.jpg", "CUIP10064.jpg", "CUIP10109.jpg", "CUIC10039.jpg", "CUIC10067.jpg", "CUIC10098.jpg", "CUIC10153.jpg", "CUIC10207.jpg", "CUIC10249.jpg", "CUIC10291.jpg", "CUIC10373.jpg", "CUIC10414.jpg", "CUIC10443.jpg", "CUIC10497.jpg", "CUIP10018.jpg", "CUIP10066.jpg", "CUIP10110.jpg", "CUIC10040.jpg", "CUIC10068.jpg", "CUIC10099.jpg", "CUIC10154.jpg", "CUIC10208.jpg", "CUIC10250.jpg", "CUIC10292.jpg", "CUIC10376.jpg", "CUIC10415.jpg", "CUIC10444.jpg", "CUIC10498.jpg", "CUIP10019.jpg", "CUIP10067.jpg", "CUIP10111.jpg", "CUIC10041.jpg", "CUIC10069.jpg", "CUIC10100.jpg", "CUIC10155.jpg", "CUIC10209.jpg", "CUIC10251.jpg", "CUIC10293.jpg", "CUIC10377.jpg", "CUIC10416.jpg", "CUIC10454.jpg", "CUIC10499.jpg", "CUIP10020.jpg", "CUIP10068.jpg", "CUIP10115.jpg", "CUIC10042.jpg", "CUIC10070.jpg", "CUIC10101.jpg", "CUIC10157.jpg", "CUIC10210.jpg", "CUIC10252.jpg", "CUIC10294.jpg", "CUIC10378.jpg", "CUIC10417.jpg", "CUIC10455.jpg", "CUIC10500.jpg", "CUIP10021.jpg", "CUIP10070.jpg", "CUIP10122.jpg", "CUIC10043.jpg", "CUIC10072.jpg", "CUIC10102.jpg", "CUIC10158.jpg", "CUIC10211.jpg", "CUIC10253.jpg", "CUIC10300.jpg", "CUIC10384.jpg", "CUIC10418.jpg", "CUIC10456.jpg", "CUIC10501.jpg", "CUIP10024.jpg", "CUIP10071.jpg"];

// console.log(a)
const fs = require("fs");
let count=0;
fs.readFile("./migrations/cn.json", "utf8", (err, jsonString) => {
    if (err) {
        console.log("File read failed:", err);
        return;
    }
    // console.log("File data:", jsonString);
    let cn = JSON.parse(jsonString);
    cn = cn.map(da => {
        let parentImage = "";
        if (da.child) {
            da.child = da.child.map(d => {
                if (a.includes(d.cuisineID+ ".jpg")) {
                    const image = {
                        "imageName": d.cuisineID + ".jpg",
                        "imageUrl": `https://pikky.s3.amazonaws.com/cuisines/${d.cuisineID}.jpg`
                    };
                    count++;
                    if (d.name === "all") {
                        parentImage = {
                            "imageName": d.cuisineID + ".jpg",
                            "imageUrl": `https://pikky.s3.amazonaws.com/cuisines/${d.cuisineID}.jpg`
                        }
                    }
                    return {...d, image}
                }
                if (!("image" in da)) {
                    if (d.name === "all" && "image" in d) {
                        parentImage = d.image
                    }
                }

                return d;
            })
        }
        if (a.includes(da.cuisineID+ ".jpg")) {
            let image = {
                "imageName": da.cuisineID + ".jpg",
                "imageUrl": `https://df9pza7vwlyb8.cloudfront.net/${da.cuisineID}.jpg`
            };
            count++;
            return {...da, image}
        } else {
            if (parentImage !== "") {
                return {...da, image: parentImage}
            }
        }
        if (!("image" in da)) {
            console.log(da.name)
        }
        return da
    })
    const jsonString1 = JSON.stringify(cn)
    fs.writeFile('./newCustomer.json', jsonString1, err => {
        if (err) {
            console.log('Error writing file', err)
        } else {
            console.log('Successfully wrote file')
        }
    })
    console.log(count)
    console.log(a.length)
});

